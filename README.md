# webServer - on embedded STM NUCLEO-H723ZG
## C / C++ 20, FreeRTOS, LwIP, ptools

### Based on original example code from STM 
[github.com/STM.../LwIP/LwIP_HTTP_Server_Netconn_RTOS](https://github.com/STMicroelectronics/STM32CubeH7/tree/master/Projects/NUCLEO-H723ZG/Applications/LwIP/LwIP_HTTP_Server_Netconn_RTOS)

Original example shows 2 STM pages - 1st static board info and 2nd dynamic page showing RTOS threads

Modified code h7webserver shows same pages + some more. <br/> 
STM pages are generated by C code, interactive pages are from C++20 ptools at [github.com/okl-tools/ptools](https://github.com/okl-tools/ptools) .<br/>
This picture shows C++ app page on mobile controlling 2 LEDs on NUCLEO board

![mobile-controls.jpg](mobile-controls.jpg)


Receipe to build the h7webserver
- ensure to have a working arm toolchain, not too old. - 14.2 but 12 or 13 could work also <br/>
inside bash type<br/>
**arm-none-eabi-g++ --version** <br/>
*which should show you* <br/>
  arm-none-eabi-g++ (xPack GNU Arm Embedded GCC x86_64) 14.2.1 20241119
  Copyright (C) 2024 Free Software Foundation, Inc.

- cmake 3.22 or more new

- git clone https://github.com/STMicroelectronics/STM32CubeH7/tree/master </br>
I recommend to do this because than you are sure to have all driver code
and original examples. Unfortunately it is really big - 2.4 GB

- git clone https://github.com/okl-tools/ptools </br> 200 KB only </br>
ptools is a C++ 20 lib which makes a bridge between C and C++ 20.

- git clone https://github.com/okl-tools/h7webServer </br>
This code - h7Webserver - fork of [github.com/STM .../LwIP_HTTP_Server_Netconn_RTOS](https://github.com/STMicroelectronics/STM32CubeH7/tree/master/Projects/NUCLEO-H723ZG/Applications/LwIP/LwIP_HTTP_Server_Netconn_RTOS)

If all stuff is on you harddrive we need 4 symlinks (ln -s) to be made
The first 3 point to 3 directores of the big STM32CubeH7 repository.
The 4th to the ptools 

<pre>
Drivers -> /cppDev/E/stm32/H7/v12.1/STM32CubeH7/Drivers/
FreeRTOS -> /cppDev/E/stm32/H7/v12.1/STM32CubeH7/Middlewares/Third_Party/FreeRTOS/
LwIP -> /cppDev/E/stm32/H7/v12.1/STM32CubeH7/Middlewares/Third_Party/LwIP/
ptools -> /cppDev/E/ptools/
</pre>

After all

<pre>
/cppDev/E/H723ZG/h7webServer$ mkdir build
/cppDev/E/H723ZG/h7webServer$ cd build/
/cppDev/E/H723ZG/h7webServer/build$ cmake ..
/cppDev/E/H723ZG/h7webServer/build$ make -j 8 

iface@bigbox:/cppDev/E/H723ZG/h7webServer/build$ ls -l *.elf
-rwxrwxr-x 1 3913740 Jun 18 16:38 h7webServer.elf
</pre>

**time to flash**

....to be continued ....


